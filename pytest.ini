[tool:pytest]
# Pytest configuration for optimized rxiv-maker test suite

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output configuration
console_output_style = progress
verbosity = 1

# Markers for test categorization
markers =
    smoke: Quick smoke tests for basic functionality
    unit: Unit tests for individual components
    integration: Integration tests for component interactions
    e2e: End-to-end tests for complete workflows
    regression: Regression tests for known issues
    slow: Tests that take longer than 30 seconds
    docker: Tests requiring Docker
    network: Tests requiring network connectivity
    filesystem: Tests with heavy filesystem operations
    validation: Validation system tests
    processor: Content processor tests
    infrastructure: Infrastructure and platform tests
    performance: Performance and benchmark tests

# Performance optimizations
addopts =
    --strict-markers
    --strict-config
    --disable-warnings
    --tb=short
    --maxfail=5
    --durations=10
    -ra

# Coverage configuration (when using pytest-cov)
# addopts = --cov=src/rxiv_maker --cov-report=term-missing --cov-report=html

# Parallel execution (when using pytest-xdist)
# addopts = -n auto

# Test timeout (when using pytest-timeout)
timeout = 300
timeout_method = thread

# Ignore paths
norecursedirs =
    .git
    .tox
    dist
    build
    *.egg
    __pycache__
    .venv
    venv
    node_modules

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::FutureWarning:django.*
    ignore::pytest.PytestUnraisableExceptionWarning

# Minimum pytest version
minversion = 6.0
